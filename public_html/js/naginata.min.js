/*! naginata.fi - v0.6.3 - 2014-06-11
* Copyright (c) 2014 ; Licensed Attribution-ShareAlike 3.0 Unported */

"use strict";!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-2643697-14","naginata.fi"),ga("require","displayfeatures"),ga("send","pageview");var sendanmaki=window.sendanmaki={lang:"fi",interval:36e5,notes:{"/img/naginata-bogu-chudan-artwork-lecklin.png":[{width:104,height:126,x:45,y:0,note:"Men"},{width:58,height:82,x:147,y:235,note:"Kote"},{width:83,height:118,x:55,y:138,note:"Do"},{width:137,height:87,x:30,y:246,note:"Tare"},{width:52,height:133,x:112,y:435,note:"Sune ate"},{width:31,height:39,x:369,y:236,note:"Kissaki"},{width:23,height:25,x:13,y:252,note:"Ishizuki"},{width:48,height:26,x:251,y:307,note:"Sendanmaki"},{width:39,height:27,x:352,y:279,note:"Monouchi"}]},buildImageNotes:function(a,b){var c=$('img[src="'+a+'"]').parent().addClass("relative");$('img[src="'+a+'"]').each(function(){b.forEach(function(b){sendanmaki.createImgNote(b,a,c)})}),$(document).on("mouseover mouseout",".note[rel]",function(a){var b=$(a.currentTarget);"mouseover"===a.type?b.addClass("notehover"):b.removeClass("notehover")})},createImgNote:function(a,b,c){if(c.length>0&&0===$('span.note[rel="'+a.note+'"]').length){var d=$('<span class="note" rel="'+a.note+'"></span>');d.css("left",a.x).css("top",a.y);var e=$('<span class="notearea"></span>');e.css("width",a.width).css("height",a.height);var f=$('<span class="notetext">'+a.note+"</span>");d.append(e,f),c.append(d).show()}},onVideoClick:function(a){a.preventDefault(),sendanmaki.openVideoLink($(this))},openVideoLink:function(a){var b=a.attr("href");b=b.replace(/vimeo.com\/(\w+)/,"player.vimeo.com/video/$1"),b=b.replace(/youtube.com\/watch\?v=(\w+)/,"youtube.com/embed/$1?version=3&f=videos&app=youtube_gdata"),sendanmaki.openIframe(b,a.attr("title"))},onFigureClick:function(a){a.preventDefault(),sendanmaki.openFlickrImage($(this))},openFlickrImage:function(a){var b=a.find("img").attr("src");-1!==b.search(/flickr\.com\//)&&(b=b.replace("_m.jpg","_z.jpg")),ga("send","pageview",b),$.colorbox({title:a.attr("title"),href:b,photo:!0})},domReady:function(){this.lang=$("html").attr("lang")||this.lang,sendanmaki.localiseColorbox(),$.each(this.notes,this.buildImageNotes);var a=$("article p > a:has(img:only-child), article.media ul a"),b=$('a[href^="http://"], a[href^="https://"]').not(a);b.on("click",function(a){a.preventDefault();var b=$(this).attr("href");window.open(b,$.now())}),$("article p > a:has(img:only-child)").on("click",sendanmaki.onFigureClick),$("article.media ul:last-of-type a").on("click",sendanmaki.onVideoClick),$("article.media ul:first-of-type > li > a").colorbox({rel:"several",photo:!0}),$(document).on("cbox_complete",function(){var a=$.colorbox.element().attr("href");a&&ga("send","pageview",a)}),$(document).on("click",'#colorbox input[type="button"][name="close"]',function(){$.colorbox.close()})},localiseColorbox:function(){console.log("this.lang: "+this.lang),"fi"===this.lang?$.extend($.colorbox.settings,{current:"Kuva {current} / {total}",previous:"Edellinen",next:"Seuraava",close:"Sulje",xhrError:"Sisällön lataaminen epäonnistui.",imgError:"Kuvan lataaminen epäonnistui.",slideshowStart:"Aloita kuvaesitys.",slideshowStop:"Lopeta kuvaesitys."}):"ja"===this.lang&&$.extend($.colorbox.settings,{current:"{total}枚中{current}枚目",previous:"前",next:"次",close:"閉じる",xhrError:"コンテンツの読み込みに失敗しました",imgError:"画像の読み込みに失敗しました",slideshowStart:"スライドショー開始",slideshowStop:"スライドショー終了"})},openIframe:function(a,b){var c=$("div.centered").width()||1e3,d=.75*c;$.colorbox({title:b,innerHeight:d,innerWidth:c,href:a,iframe:!0,scrolling:!1})},sendResourceTimings:function(){if("object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByType){var a={url:window.location.pathname,userAgent:window.navigator.userAgent,entries:JSON.stringify(window.performance.getEntriesByType("resource"))},b=$.now(),c=window.localStorage.getItem("resTimeSent")||0;b-c>sendanmaki.interval&&$.post("/resource-timings",a,function(){window.localStorage.setItem("resTimeSent",b)})}}};!function(){sendanmaki.domReady(),window.onload=function(){window.setTimeout(sendanmaki.sendResourceTimings,300)}}();
//# sourceMappingURL=naginata.min.map